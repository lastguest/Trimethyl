<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='GA'>/**
</span> * @class  GA
 * @author  Flavio De Stefano &lt;flavio.destefano@caffeinalab.com&gt;
 * Proxy module for Google Analitycs
 *
 * Require &#39;analitycs.google&#39;
 *
 */

<span id='GA-property-config'>/**
</span> * * **ua**: UA of Google Analitycs. Default: `null`
 * @type {Object}
 */
var config = _.extend({
	ua: null
}, Alloy.CFG.T.ga);
exports.config = config;


var $ = require(&#39;analytics.google&#39;);
var $TRACKER = null;


<span id='GA-method-trackEvent'>/**
</span> * Track an event
 *
 * @param  {String} cat The category **or the object passed to the module**
 * @param  {String} act The action associated
 * @param  {String} lbl The label associated
 * @param  {String} val The value associated
 */
function trackEvent(cat, act, lbl, val){
	if (!$TRACKER) return;
	var obj = {};

	if (_.isObject(cat)) {
		obj = cat;
	} else {
		obj.category = cat;
		obj.action = act;
		obj.label = lbl ? lbl : &#39;&#39;;
		obj.value = val ? +val : 0;
	}

	$TRACKER.trackEvent(obj);
	console.log(&quot;GA: EVENT - &quot;+JSON.stringify(obj));
}
exports.trackEvent = trackEvent;

<span id='GA-method-event'>/**
</span> * @method event
 * @inheritDoc #trackEvent
 * Alias for {@link #trackEvent}
 */
exports.event = trackEvent;


<span id='GA-method-trackScreen'>/**
</span> * Track a screen
 *
 * @param  {String} name The screen name
 */
function trackScreen(name){
	if (!$TRACKER) return;

	$TRACKER.trackScreen(name);
	console.log(&quot;GA: SCREEN - &quot;+name);
}
exports.trackScreen = trackScreen;

<span id='GA-method-screen'>/**
</span> * @method screen
 * @inheritDoc #trackScreen
 * Alias for {@link #trackScreen}
 */
exports.screen = trackScreen;


<span id='GA-method-trackSocial'>/**
</span> * Track a social action
 *
 * @param  {String} net The social network: facebook, twitter, googleplus...
 * @param  {String} act The action associated
 * @param  {String} tar The target associated
 */
function trackSocial(net, act, tar){
	if (!$TRACKER) return;
	var obj = {};

	if (_.isObject(net)) {
		obj = net;
	} else {
		obj.network = net;
		obj.action = act || &#39;share&#39;;
		obj.target = tar || &#39;&#39;;
	}

	$TRACKER.trackSocial(net);
	console.log(&quot;GA: SOCIAL - &quot;+JSON.stringify(obj));
}
exports.trackSocial = trackSocial;

<span id='GA-method-social'>/**
</span> * @method social
 * @inheritDoc #trackSocial
 * Alias for {@link #trackSocial}
 */
exports.social = trackSocial;



<span id='GA-method-trackTiming'>/**
</span> * Track timing
 *
 * @param  {String} net The social network: facebook, twitter, googleplus...
 * @param  {String} act The action associated
 * @param  {String} tar The target associated
 */
function trackTiming(cat, time, name, lbl){
	if (!$TRACKER) return;
	var obj = {};

	if (_.isObject(cat)) {
		obj = cat;
	} else {
		obj.category = cat;
		obj.time = time;
		obj.name = name || &#39;&#39;;
		obj.label = lbl || &#39;&#39;;
	}

	$TRACKER.trackTiming(obj);
	console.log(&quot;GA: TIME - &quot;+JSON.stringify(obj));
}
exports.trackTiming = trackTiming;

<span id='GA-method-time'>/**
</span> * @method time
 * @inheritDoc #trackTiming
 * Alias for {@link #trackTiming}
 */
exports.time = trackTiming;



<span id='GA-method-setTrackerUA'>/**
</span> * Set the tracker UA.
 * @param {String} ua
 */
function setTrackerUA(ua) {
	$TRACKER = $.getTracker(ua);
}
exports.setTrackerUA = setTrackerUA;


(function init(){

	$.trackUncaughtExceptions = true;
	$.debug = false;

	if (config.ua) {
		setTrackerUA(config.ua);
	}

})();
</pre>
</body>
</html>
